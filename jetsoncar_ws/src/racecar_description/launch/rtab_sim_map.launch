<launch>
  <!-- Localizaiotn EKF (Extended Kalman Filter) -->
  <!-- <include file="$(find racecar_description)/launch/racecar_local_sim.launch"/> -->


  <include file="$(find rtabmap_ros)/launch/rtabmap.launch">

    <!-- Choose between RGB-D and stereo -->
    <arg name="stereo"          default="false"/>

    <!-- Choose visualization -->
    <arg name="rtabmapviz"              default="true" />
    <arg name="rviz"                    default="false" />

    <!-- Localization-only mode -->
    <arg name="localization"            default="false"/>

    <!-- sim time for convenience, if playing a rosbag -->
    <arg name="use_sim_time"            default="true"/>

    <!-- Corresponding config files -->
    <arg name="cfg"                     default="" /> <!-- To change RTAB-Map's parameters, set the path of config file (*.ini) generated by the standalone app -->
    <arg name="gui_cfg"                 default="~/.ros/rtabmap_gui.ini" />
    <arg name="rviz_cfg"                default="$(find rtabmap_ros)/launch/config/rgbd.rviz" />

    <arg name="frame_id"                default="camera_depth_frame"/>     <!-- Fixed frame id, you may set "base_link" or "base_footprint" if they are published -->
    <arg name="odom_frame_id"           default=""/>                <!-- If set, TF is used to get odometry instead of the topic -->
    <arg name="map_frame_id"            default="map"/>
    <arg name="ground_truth_frame_id"   default=""/>     <!-- e.g., "world" -->
    <arg name="ground_truth_base_frame_id" default=""/>  <!-- e.g., "tracker", a fake frame matching the frame "frame_id" (but on different TF tree) -->
    <arg name="namespace"               default="racecar"/>
    <arg name="database_path"           default="~/.ros/rtabmap.db"/>
    <arg name="queue_size"              default="10"/>
    <arg name="wait_for_transform"      default="0.2"/>
    <arg name="args"                    default="delete_db_from_start"/>  <!-- delete_db_on_start, udebug -->
    <arg name="launch_prefix"           default=""/>              <!-- for debugging purpose, it fills launch-prefix tag of the nodes -->
    <arg name="output"                  default="screen"/>        <!-- Control node output (screen or log) -->

    <!-- RGB-D related topics -->
    <arg name="rgb_topic"               default="/front_cam/color/image_raw" />
    <arg name="depth_topic"             default="/front_cam/depth/image_raw" />
    <arg name="camera_info_topic"       default="/front_cam/color/camera_info" />

    <!-- Already synchronized RGB-D related topic, with rtabmap_ros/rgbd_sync nodelet -->
    <arg name="rgbd_sync"               default="false"/>         <!-- pre-sync rgb_topic, depth_topic, camera_info_topic -->
    <arg name="approx_rgbd_sync"        default="true"/>          <!-- false=exact synchronization -->
    <arg name="rgbd_topic"              default="rgbd_image" />
    <arg name="depth_scale"             default="1.0" />

    <arg name="compressed"              default="false"/>     <!-- If you want to subscribe to compressed image topics -->
    <arg name="rgb_image_transport"     default="raw"/>       <!-- Common types compressed, theora (see "rosrun image_transport list_transports") -->
    <arg name="depth_image_transport"   default="raw"/>       <!-- Depth compatible types compressedDepth (see "rosrun image_transport list_transports") -->

    <arg name="subscribe_scan"          default="false"/>
    <arg name="scan_topic"              default="/scan"/>
    <arg name="subscribe_scan_cloud"    default="false"/>
    <arg name="scan_cloud_topic"        default="/scan_cloud"/>
    <arg name="scan_normal_k"           default="0"/>

    <arg name="visual_odometry"          default="true"/>          <!-- Launch rtabmap visual odometry node -->
    <arg name="icp_odometry"             default="true"/>         <!-- Launch rtabmap icp odometry node -->
    <arg name="odom_topic"               default="visual_odom"/>          <!-- Odometry topic name -->
    <arg name="odom_tf_angular_variance" default="1"/>             <!-- If TF is used to get odometry, this is the default angular variance -->
    <arg name="odom_tf_linear_variance"  default="1"/>             <!-- If TF is used to get odometry, this is the default linear variance -->
    <arg name="odom_args"                default=""/>              <!-- More arguments for odometry (overwrite same parameters in rtabmap_args) -->
    <arg name="odom_sensor_sync"         default="false"/>
    <arg name="odom_guess_frame_id"        default=""/>
    <arg name="odom_guess_min_translation" default="0"/>
    <arg name="odom_guess_min_rotation"    default="0"/>
    <arg name="imu_topic"                default="/racecar/imu"/>          <!-- only used with VIO approaches -->

    <arg name="subscribe_user_data"      default="false"/>             <!-- user data synchronized subscription -->
    <arg name="user_data_topic"          default="/user_data"/>
    <arg name="user_data_async_topic"    default="/user_data_async" /> <!-- user data async subscription (rate should be lower than map update rate) -->

  </include>


</launch>
